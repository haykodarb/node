<!DOCTYPE html>
<html>
<head>
	<title>Termotanque
	</title>

	<style>
		body {
			background-color: #7b7b7b;
		}

		form {
			display: flex;
		    flex-direction: column;
		    max-width: 600px;
		    width: 100%;
		    margin: 0 auto;
		    text-align: left;
		}


		form > div {
			display: flex;
		    align-items: center;
		    justify-content: space-between;
		    padding: 5px 0;
		    height: 30px;
		}

		form > div > label {
			background: black;
			color: white;
			width: 100%;
			height: 100%;
			display: flex;
    		align-items: center;
    		padding-left: 5px;
    		border-top-left-radius: 5px;
    		border-bottom-left-radius: 5px;
		}

		form > div > input {
			height: 100%;
			padding: 0;
			text-align: center;
			font-weight: bold;
			border: none;
			border-top-right-radius: 5px;
    		border-bottom-right-radius: 5px;
		}

		form input[type="submit"] {
			margin-top: 20px;
			padding: 10px;
		}

		form input[disabled] {
			background: #afafaf;
			cursor: not-allowed;
		}
	</style>
</head>
<body>	
	<form action="/action_page.php">
		<div>
	  		<label for="sistema">Sistema</label>
	  		<input type="text" id="estadoApp" name="sistema" value="ON">
  		</div>
  		<div>
			<label for="resistencia">Resistencia</label>
			<input type="text" id="estadoActual" name="resistencia" value="Apagada">
		</div>
		<div>
			<label for="temperatura">Temperatura</label>
			<input type="text" id="temp" name="temperatura" value="">
		</div>	
		<div>
			<label for="setPoint">Set point</label>
			<input type="text" id="setPoint" name="setPoint" value="55.00 °C">
		</div>	
		<div>
			<label for="hora">Hora</label>
			<input type="text" disabled id="hora" name="hora" value="16:02">
		</div>	
		<input type="submit" value="Enviar	">
	</form>
	
<script>

fetch('https://hayk-project.now.sh/datos')
.then(res => {
	return res.json();	
})
.then(json => {
	let temp = json.temp;
	let string = `${temp}°C`;
	document.getElementById('temp').setAttribute('value', `${temp}`);
})

fetch('https://hayk-project.now.sh/estados')
.then(res => {
	return res.json();	
})
.then(json => {
	let setPoint = json.setPoint;
	setPoint = `${setPoint}°C`;
	let estadoApp = json.estadoApp;
	if(estadoApp == 1) {
		estadoApp = `Encendido`;
	} else {estadoApp = `Apagado`;}
	let estadoActual = json.estadoActual;
	if(estadoActual == 1) {
		estadoActual = `ON`;
	} else {estadoApp = `OFF`;}
	document.getElementById('setPoint').setAttribute('value', `${setPoint}`);
	document.getElementById('estadoApp').setAttribute('value', `${estadoApp}`);
	document.getElementById('estadoActual').setAttribute('value', `${estadoActual}`);
})

</script>

</body>
</html>